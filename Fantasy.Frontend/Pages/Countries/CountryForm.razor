<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<EditForm EditContext="editContext" OnValidSubmit="OnValidSubmit">
    <DataAnnotationsValidator />



    <MudTextField Label="@L["Country"]"
                  @bind-Value="@CountryDTO.Name"
                  For="@(() => CountryDTO.Name)"
                  Class="mb-4" />
    <MudTextField Label="@L["CountryCode"]"
                  @bind-Value="@CountryDTO.Code"
                  For="@(() => CountryDTO.Code)"
                  Class="mb-4" />
    <MudTextField Label="@L["CountryISOname"]"
                  @bind-Value="@CountryDTO.ISOname"
                  For="@(() => CountryDTO.ISOname)"
                  Class="mb-4" />
    <MudTextField Label="@L["CountryAlfa2Code"]"
                  @bind-Value="@CountryDTO.Alfa2Code"
                  For="@(() => CountryDTO.Alfa2Code)"
                  Class="mb-4" />
    <MudTextField Label="@L["CountryAlfa3Code"]"
                  @bind-Value="@CountryDTO.Alfa3Code"
                  For="@(() => CountryDTO.Alfa3Code)"
                  Class="mb-4" />

    <MudAutocomplete T="Currency"
                     Label=@L["CountryDefaultCurrencyCode"]
                     Placeholder=@L["AppSelect"]
                     SearchFunc="SearchCurrency"
                     Value="selectedCurrency"
                     ValueChanged="CurrencyChanged" 
                     ToStringFunc="@(e=> e==null?null : $"{e.Name}")"
                     Class="mb-2">
        <ItemTemplate Context="itemContext">
            @itemContext.Name
        </ItemTemplate>
    </MudAutocomplete>

    <MudTextField Label="@L["CountryCallingCode"]"
                  @bind-Value="@CountryDTO.CallingCode"
                  For="@(() => CountryDTO.CallingCode)"
                  Class="mb-4" />
    <MudTextField Label="@L["CountryGuid"]"
                  @bind-Value="@CountryDTO.GuidCode"
                  For="@(() => CountryDTO.GuidCode)"
                  Class="mb-4" />

    <MudButton Variant="Variant.Outlined" 
               StartIcon="@Icons.Material.Filled.ArrowBack" 
               Color="Color.Info" 
               OnClick="ReturnAction">
                @L["IUReturn"]
    </MudButton>

    <MudButton Variant="Variant.Outlined" 
               StartIcon="@Icons.Material.Filled.Check" 
               Color="Color.Primary" 
               ButtonType="ButtonType.Submit">
                @L["IUSaveChanges"]
    </MudButton>
</EditForm>